<html>
<head>
    <title>LiteNRK</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV8/pCIVB4uIdIhQneyiIo61CkWoEGqFVh1MLv2CJg1Jiouj4Fpw8GOx6uDirKuDqyAIfoC4C06KLlLi/5JCixgPjvvx7t7j7h3gb1aZagYTgKpZRiaVFHL5VSH0iiCiAIYwKjFTnxPFNDzH1z18fL2L8yzvc3+OfqVgMsAnECeYbljEG8Qzm5bOeZ84wsqSQnxOPGHQBYkfuS67/Ma55LCfZ0aMbGaeOEIslLpY7mJWNlTiaeKYomqU78+5rHDe4qxW66x9T/7CcEFbWeY6zShSWMQSRAiQUUcFVViI06qRYiJD+0kP/4jjF8klk6sCRo4F1KBCcvzgf/C7W7M4NekmhZNAz4ttf4wBoV2g1bDt72Pbbp0AgWfgSuv4a01g9pP0RkeLHQED28DFdUeT94DLHWD4SZcMyZECNP3FIvB+Rt+UBwZvgb41t7f2Pk4fgCx1lb4BDg6B8RJlr3u8u7e7t3/PtPv7AXmhcqkzmPJyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6QQcABg7IcDfcAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAABKSURBVCjPY2QwX89ACmBiIBGMaqCLhucbneEIwoWL47RB0n+vpP9eNFPgIiyYGiCGwVUgq8ZpA7IbJP33wtk4PY3mJGQ9jDRPrQA9IyJ+k/r1jQAAAABJRU5ErkJggg==">
    <script>
        let urlParseSubstitutions = {
            "ae": "√¶",
            "aa": "√•",
            "a": "√•",
            "fa": "f√•",
            "na": "n√•",
            "pa": "p√•",
            "slatt": "sl√•tt",
            "ar": "√•r",
            "dod": "d√∏d"
        };

        function fadeOut(element) {
            let opacity = 1;
            let timer = setInterval(() => {
                if (opacity <= 0.1){
                    clearInterval(timer);
                    element.style.display = "none";
                    checkHidden();
                }
                element.style.opacity = opacity;
                element.style.filter = `alpha(opacity=${opacity * 100})`;
                opacity -= opacity * 0.1;
            }, 20);
        }

        function checkHidden() {
                let articles = document.querySelectorAll("tr.article");
                let numHidden = 0;
    
                for(let i = 0; i < articles.length; i++) {
                    if(articles[i].style.display == "none") {
                        numHidden += 1;
                    }
                }
    
                if(articles.length == numHidden) {
                    document.querySelector("#mainContent").innerHTML = `<div id="loadingDiv">Ingen artikler √• vise.</div>`;
                }
        }

        function hideAll() {
            if(confirm("Er du sikker p√• at du vil markere alle artikler som lest? Dette skjuler dem fra visningen.\n\nDu kan tilbakestille dette i innstillingene.")) {
                document.querySelectorAll(".hideBtn").forEach(btn => btn.click());
            }
        }

        function toggleFilterModal() {
            if(document.getElementById("modalbg").style.display == "none") {
                document.getElementById("modalbg").style.display = "block";
            } else {
                document.getElementById("modalbg").style.display = "none";
            }
        }

        function saveSettings() {
            bannedCategories = document.querySelector("#bannedCategoriesTextArea").value.trim().toLowerCase().split(";");
            bannedKeywords = document.querySelector("#bannedKeywordsTextArea").value.trim().toLowerCase().split(";");
            bannedURLContent = document.querySelector("#bannedURLContentTextArea").value.trim().toLowerCase().split(";");
            hidePublicationTimestamp = document.querySelector("#hidePublicationTimestampCheckBox").checked;
            hideCategories = document.querySelector("#hideCategoriesCheckBox").checked;
            hideQuoteTitles = document.querySelector("#hideQuoteTitlesCheckBox").checked;
            hideShortTitles = document.querySelector("#hideShortTitlesCheckBox").checked;
            showParsedURL = document.querySelector("#showParsedURLCheckBox").checked;
            showDescription = document.querySelector("#showDescriptionCheckBox").checked;
            borderArticles = document.querySelector("#borderArticlesCheckBox").checked;
            fillHeight = document.querySelector("#fillHeightCheckBox").checked;
            phoneMode = document.querySelector("#phoneModeCheckBox").checked;

            localStorage.setItem("bannedCategories", JSON.stringify(bannedCategories));
            localStorage.setItem("bannedKeywords", JSON.stringify(bannedKeywords));
            localStorage.setItem("bannedURLContent", JSON.stringify(bannedURLContent));
            localStorage.setItem("hidePublicationTimestamp", JSON.stringify(hidePublicationTimestamp));
            localStorage.setItem("hideCategories", JSON.stringify(hideCategories));
            localStorage.setItem("hideQuoteTitles", JSON.stringify(hideQuoteTitles));
            localStorage.setItem("hideShortTitles", JSON.stringify(hideShortTitles));
            localStorage.setItem("showParsedURL", JSON.stringify(showParsedURL));
            localStorage.setItem("showDescription", JSON.stringify(showDescription));
            localStorage.setItem("borderArticles", JSON.stringify(borderArticles));
            localStorage.setItem("fillHeight", JSON.stringify(fillHeight));
            localStorage.setItem("phoneMode", JSON.stringify(phoneMode));

            console.log("saved!");
        }

        function clearSettings() {
            if(confirm("Er du sikker p√• at du vil slette alle filtre og tilbakestille alle innstillinger? Dette kan ikke angres, og vil ikke slette listen over skjulte artikler.")) {
                localStorage.removeItem("bannedCategories");
                localStorage.removeItem("bannedKeywords");
                localStorage.removeItem("bannedURLContent");
                localStorage.removeItem("hidePublicationTimestamp");
                localStorage.removeItem("hideCategories");
                localStorage.removeItem("hideQuoteTitles");
                localStorage.removeItem("hideShortTitles");
                localStorage.removeItem("showParsedURL");
                localStorage.removeItem("showDescription");
                localStorage.removeItem("borderArticles");
                localStorage.removeItem("fillHeight");
                localStorage.removeItem("phoneMode");
    
                location.reload();
            }
        }

        function quickFilter() {
            let filterInput = document.querySelector("#quickFilter").value.trim().toLowerCase();
            if(filterInput == "") {
                document.querySelectorAll("tr.article").forEach(article => article.classList.remove("hidden"));
            } else {
                let articleDivs = document.querySelectorAll("tr.article");
                articleDivs.forEach(articleDiv => {
                    let headline = articleDiv.querySelector("a.headline").innerText.toLowerCase();
                    let categories = "";
                    if(articleDiv.querySelector("span.categories")) {
                        categories = articleDiv.querySelector("span.categories").innerText.toLowerCase();
                    }

                    if(!headline.includes(filterInput) && !categories.includes(filterInput)) {
                        articleDiv.classList.add("hidden");
                    } else {
                        articleDiv.classList.remove("hidden");
                    }
                });
            }
        }

        function clearHiddenArticles() {
            if(confirm("Er du sikker p√• at du vil slette listen over skjulte artikler? Dette kan ikke angres, og vil ikke slette filtrene eller innstillingene dine.")) {
                localStorage.removeItem('hiddenArticles'); 
                location.reload();
            }
        }

        function exportData() {
            saveSettings();

            let dataToExport = JSON.stringify({...localStorage});            
            let dlElem = document.createElement('a');
            
            dlElem.setAttribute("href", "data:text/plain;charset=utf-8," + encodeURIComponent(dataToExport));
            dlElem.setAttribute("download", `LiteNRK-${Date.now()}.json`);
            dlElem.style.display = "none";
            document.body.appendChild(dlElem);
            
            dlElem.click();
            document.body.removeChild(dlElem);
        }

        function importData(event) {
            let reader = new FileReader();
            reader.onload = function(){
                if(confirm("Er du sikker p√• at du vil importere dataene i denne filen? Dette overskriver eksisterende data, og kan ikke angres.")) {
                    localStorage.clear();
                    
                    let importedData = JSON.parse(reader.result);
                    for(let key in importedData) {
                        localStorage.setItem(key, importedData[key]);
                    }
                    location.reload();
                }
            };
            reader.readAsText(event.target.files[0]);
        }

        function wipeData() {
            if(confirm("Er du sikker p√• at du vil slette alle data lagret av LiteNRK i nettleseren din? Dette kan ikke angres.")) {
                localStorage.clear();
                location.reload();
            }
        }

        function getLSValue(name, defaultValue) {
            if(localStorage.getItem(name) === null) {
                return defaultValue;
            } else {
                return JSON.parse(localStorage.getItem(name));   
            }
        }

        let rssURL = "https://www.nrk.no/toppsaker.rss";
        
        let bannedCategories = getLSValue("bannedCategories", []);
        let bannedKeywords = getLSValue("bannedKeywords", []);
        let bannedURLContent = getLSValue("bannedURLContent", []);
        let hiddenArticles = getLSValue("hiddenArticles", []);
        let hidePublicationTimestamp = getLSValue("hidePublicationTimestamp", true);
        let hideCategories = getLSValue("hideCategories", true);
        let hideQuoteTitles = getLSValue("hideQuoteTitles", false);
        let hideShortTitles = getLSValue("hideShortTitles", false);
        let showParsedURL = getLSValue("showParsedURL", false);
        let showDescription = getLSValue("showDescription", true);
        let borderArticles = getLSValue("borderArticles", true);
        let fillHeight = getLSValue("fillHeight", true);
        let phoneMode = getLSValue("phoneMode", true);

        if(bannedCategories.length == 1 && bannedCategories[0] == "") {
            bannedCategories = [];
        }

        if(bannedKeywords.length == 1 && bannedKeywords[0] == "") {
            bannedKeywords = [];
        }

        if(bannedURLContent.length == 1 && bannedURLContent[0] == "") {
            bannedURLContent = [];
        }

        fetch(rssURL)
            .then(response => response.text())
            .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
            .then(data => {
                let includedArticles = [];
                let items = data.querySelectorAll("item");
                for(let i = 0; i < items.length; i++) {
                    let title = items[i].querySelector("title").textContent.trim();
                    
                    if(!title) {
                        continue;
                    }

                    let url = items[i].querySelector("link").textContent.trim();
                    let description = items[i].querySelector("description").textContent;
                    let date = items[i].getElementsByTagNameNS("http://purl.org/dc/elements/1.1/", "date")[0].textContent.trim();
                    date = new Date(date).toLocaleDateString() + " kl. " + new Date(date).toLocaleTimeString();
                    let guid = items[i].querySelector("guid").textContent.trim();
                    let categories = items[i].querySelectorAll("category");
                    
                    let skip = false;

                    // Check if article is already hidden via hide button
                    if(hiddenArticles.includes(guid)) {
                        skip = true;
                    }

                    // Check if article is a dupe of already included article
                    if(!skip) {
                        for(let j = 0; j < includedArticles.length; j++) {
                            if(includedArticles[j][3] === guid) {
                                skip = true;
                                break;
                            }
                        }
                    }

                    // Check if title is a quote
                    if(!skip) {
                        if(hideQuoteTitles && title.startsWith("¬´") && title.endsWith("¬ª")) {
                            skip = true;
                        }
                    }

                    // Check for short titles
                    if(!skip) {
                        if(hideShortTitles && title.trim().split(/\s+/).length <= 3) {
                            skip = true;
                        }
                    }

                    // Check for banned categories
                    if(!skip) {
                        for(let j = 0; j < categories.length; j++) {
                            if(bannedCategories.includes(categories[j].innerHTML.toLowerCase().trim())) {
                                skip = true;
                            }
                        }
                    }

                    // Check for banned keywords
                    if(!skip) {
                        for(let j = 0; j < bannedKeywords.length; j++) {
                            let regex = new RegExp(`\\b${bannedKeywords[j]}\\b`, "i");
                            if(regex.test(title)) {
                                skip = true;
                            }
                        }
                    }
 
                    // Check for banned URL content
                    if (!skip)¬†{
                        for(let j = 0; j < bannedURLContent.length; j++) {
                            let regex = new RegExp(bannedURLContent[j], "i");
                            if(regex.test(url)) {
                                skip = true;
                            }
                        }
                    }
                    
                    if(!skip) {
                        let cats = [];
                        categories.forEach(categoryElement => cats.push(categoryElement.innerHTML))
                        includedArticles.push([title, url, date, guid, cats, description])
                    }
                }

                // Build HTML
                let html = "<table>";
                if(includedArticles.length > 0) {
                    for(let i = 0; i < includedArticles.length; i++) {
                        let currentArticle = includedArticles[i];
                        
                        let aTitle = currentArticle[0];
                        let aURL = currentArticle[1];
                        let aParsedURLTitle = aURL;
                        let aDate = currentArticle[2];
                        let aGUID = currentArticle[3];
                        let aCategories = currentArticle[4];
                        let aDescription = currentArticle[5];
                        let aShortDescription = "";

                        // Remove zero-width characters
                        aDescription = aDescription.replace(/[\u00AD\u200B-\u200D\uFEFF]/g, "").trim();

                        if(aDescription.split(" ").length > 10) {
                            let words = aDescription.split(" ");
                            for(let j = 0; j < 10; j++) {
                                aShortDescription += `${words[j]} `;
                            }
                        }

                        if(!aDescription || aDescription === "") {
                            aDescription = "Ingen beskrivelse tilgjengelig.";
                        }

                        if(showParsedURL) {
                            aParsedURLTitle = aParsedURLTitle.substring(aURL.lastIndexOf("/") + 1).replaceAll(/_-_-_-/g, "=");
                            aParsedURLTitle = aParsedURLTitle.replaceAll(/-[0-9]\.[0-9]{8}/g, "");
                            aParsedURLTitle = aParsedURLTitle.replaceAll(/_-_-/g, "=");
                            aParsedURLTitle = aParsedURLTitle.replaceAll(/_-/g, "=");
                            aParsedURLTitle = aParsedURLTitle.replaceAll(/-/g, " ");
                            aParsedURLTitle = aParsedURLTitle.replaceAll(/=/g, " - ");
                            aParsedURLTitle = aParsedURLTitle.replaceAll(/_/g, "");
                            aParsedURLTitle = aParsedURLTitle.replaceAll(/  /g, " ");
    
                            aParsedURLTitle = aParsedURLTitle.charAt(0).toUpperCase() + aParsedURLTitle.slice(1);

                            // Common substitutions
                            let words = aParsedURLTitle.split(" ");
                            
                            for(let j = 0; j < words.length; j++) {
                                if(urlParseSubstitutions[words[j]]) {
                                    words[j] = urlParseSubstitutions[words[j]];
                                }
                            }

                            aParsedURLTitle = words.join(" ");
                        }

                        html += 
                            `<tr class="article ${borderArticles ? "bordered" : ''}" data-guid="${aGUID}">
                                ${!phoneMode ?
                                    `<td class="hideCell ${fillHeight ? "filled" : ''}">
                                        <span class="hideBtn" title="Marker denne artikkelen som lest og skjul den">${fillHeight ? "‚úì" : "‚úÖ"}</span>
                                    </td>`
                                : ''}
                                <td>
                                    <div class="${!phoneMode ? "articleCellLeftMargin" : ''}">
                                        <a class="headline" href="${aURL}" target="_blank">${aTitle}</a>
                                        ${hidePublicationTimestamp ? 
                                            ""
                                        :
                                            `<br /><span class="articleDate">[${aDate}]</span>
                                        `}
                                        ${showParsedURL ? 
                                            `<br /><span class="parsedURLTitle"><b>URL-tittel:</b> ¬´${aParsedURLTitle}¬ª</span>`
                                        :
                                            ''
                                        }
                                        ${!hideCategories && aCategories.length > 0 ?
                                            `<br /><span class="categories" data-all="${aCategories.join(", ")}"><b>Kategorier:</b> 
                                                ${aCategories.length > 3 ?
                                                    `${aCategories[0]}, ${aCategories[1]}, ${aCategories[2]}... <span class="showAllCats">[vis alle]</span>`
                                                :
                                                    aCategories.join(", ")
                                                }</span>`
                                        :
                                            ''
                                        }
                                        ${showDescription && aDescription !== "" ?
                                            `<br /><span class="description"><b>Beskrivelse:</b> ¬´${aShortDescription == "" ? 
                                                    aDescription
                                                :
                                                    aShortDescription.trim() + "..."
                                            }¬ª</span>${aShortDescription !== "" ?
                                                `<span class="showFullDescription">[vis hele]</span>`
                                            :
                                                ""
                                            }<span class="fullDescription hidden"><b>Beskrivelse:</b> ¬´${aDescription}¬ª</span>`
                                        :
                                            ''
                                        }
                                    </div>
                                </td>
                                ${phoneMode ?
                                    `<td class="hideCell ${fillHeight ? "filled" : ''}">
                                        <span class="hideBtn" title="Marker denne artikkelen som lest og skjul den">${fillHeight ? "‚úì" : "‚úÖ"}</span>
                                    </td>`
                                : ''}
                            </tr>\n`;
                    }
                    html += "</table>";
                } else {
                    html = `<div id="loadingDiv">Ingen artikler √• vise.</div>`
                }
                
                document.querySelector("#mainContent").innerHTML = html;

                let hideElems = document.querySelectorAll("span.hideBtn");
                if(fillHeight) {
                    hideElems = document.querySelectorAll("td.hideCell");
                }

                hideElems.forEach(hideElem => {
                    hideElem.addEventListener("click", function() {
                        let currGuid = this.closest("tr.article").getAttribute("data-guid");

                        if(!hiddenArticles.includes(currGuid)) {
                            hiddenArticles.push(currGuid);
                            localStorage.setItem("hiddenArticles", JSON.stringify(hiddenArticles));
                        }

                        fadeOut(this.closest("tr.article"))
                    });
                });

                document.querySelectorAll("span.showFullDescription").forEach(showFullBtn => {
                    showFullBtn.addEventListener("click", function() {
                        console.log(this);
                        this.closest("tr.article").querySelector("span.description").classList.add("hidden");
                        this.closest("tr.article").querySelector("span.fullDescription").classList.remove("hidden");
                        this.classList.add("hidden");
                    });
                });

                document.querySelectorAll("span.showAllCats").forEach(showFullBtn => {
                    showFullBtn.addEventListener("click", function() {
                        this.closest("span.categories").innerHTML = `<b>Kategorier:</b> ${this.closest("span.categories").getAttribute("data-all")}`;
                    });
                });
            })
    </script>
    <style>
        html,body {
            background-color: #2e3440;
            color: #eceff4;
            font-size: 1.2em;
        }

        div#wrapper {
            margin-top: 1em;
            margin-bottom: 1em;
        }

        h2 {
            margin: 0;
            width: 100%;
            text-align: center;
        }

        div#loadingDiv {
            width: 100%;
            text-align: center;
        }

        a.headline {
            font-size: 1.5em;
        }

        textarea {
            width: 100%;
            height: 3em;
        }

        td.hideCell {
            vertical-align: top;
        }

        a {
            color: #eceff4;
            text-decoration: none;
        }

        a:visited {
            color: #989898;

        }

        h1, .controls, #footer {
            margin: auto;
            text-align: center;
        }

        #mainContent {
            max-width: 60%;
            min-width: 60%;
            margin: auto;
        }

        span.articleDate, span.showFullDescription, span.showAllCats {
            color: #ccc;
        }

        span.showFullDescription, span.showAllCats {
            margin-left: 0.2em;
        }

        span.categories, span.parsedURLTitle, span.description, span.fullDescription, span.showFullDescription, span.articleDate {
            font-size: 0.8em;
        }

        span.hideBtn, span#closeBtn {
            font-size: 1.5em;
            user-select: none;
            cursor: pointer;
        }

        span.hideBtn.right {
            margin-right: 0;
            margin-left: 0.5em;
        }

        .controlBtn, span.showFullDescription, span.showAllCats {
            user-select: none;
            cursor: pointer;
        }

        table {
            width: 100%;
        }

        tr.article {
            margin-bottom: 0.4em;
            box-sizing: border-box;
        }

        tr.bordered {
            display: block;
            margin-bottom: 1em;
            width: 100%;
            border: 1px dashed white;
            padding: 0.5em;
            border-radius: 1em;
        }

        td.hideCell.filled, td.hideCell:last-child {
            text-align: right;
            width: 1%;
            white-space: nowrap;
            padding: 0.3em;
        }

        div.articleCellLeftMargin {
            margin-left: 0.5em;
        }

        div#footer {
            font-size: 0.6em;
            margin-top: 0.5em;
        }

        div#footer > a {
            font-weight: bold;
        }

        td.hideCell.filled {
            vertical-align: middle;
            background-color: #080;
            border-radius: 0.5em;
            user-select: none;
            cursor: pointer;
        }
        
        td.hideCell.filled > span.hideBtn {
            margin: 0 !important;
        }

        #modal {
            font-size: 0.7em;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            background-color: #2e3440;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 10px 10px 5px black;
        }

        #modalbg {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1040;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(15px);
        }

        .hidden {
            display: none !important;
        }

        #quickFilter {
            margin-top: 1em;
            width: 20em;
        }

        /* Phone styles */
        @media all and (max-width: 1000px) {
            html,body {
                font-size: 1.0em;
            }

            #mainContent {
                width: fit-content;
                max-width: 95%;
                min-width: 95%;
                margin: auto;
                box-sizing: border-box;
            }

            span.hideBtn {
                font-size: 2em;
            }
            
            .controlBtn {
                font-size: 1.5em;
            }

            div.controls {
                font-size: 1em;
            }

            a.headline {
                font-size: 1.5em;
            }
            
            span.categories, span.parsedURLTitle, span.description, span.fullDescription, span.showFullDescription, span.articleDate {
                font-size: 1em;
            }

            #modal {
                font-size: 0.8em;
                position: fixed;
                top: 0;
                left: 0;
                transform: initial;
                width: 95%;
                height: 95%;
                padding: 0.5em;
                border-radius: 0;
                box-shadow: 0 0 0 0;
            }

            #modalbg {
                background-color: #2e3440;
            }
        }
    </style>
</head>

<body>
    <h1>LiteNRK</h1>

    <div class="controls">
        <span class="controlBtn" onclick="location.reload();" title="Oppdater">‚ôªÔ∏è</span>
        <span id="filterBtn" class="controlBtn" onclick="toggleFilterModal();" title="Innstillinger og filtre">‚öôÔ∏è</span>
        <span id="hideAllBtn" class="controlBtn" onclick="hideAll();" title="Marker alle som lest">‚úÖ</span>
        <br />
        <input type="text" id="quickFilter" autocomplete="off" placeholder="Hurtigfilter..." oninput="quickFilter();" />
    </div>

    <div id="modalbg" style="display: none;" onclick="this.style.display = 'none';">
        <div id="modal" onclick="event.stopPropagation();">
            <div style="float: right">
                <span id="closeBtn" onclick="document.getElementById('modalbg').style.display = 'none';">‚ùå</span>
            </div>
            <h2>Innstillinger og filtre</h2>
            Her kan du definere filtre for √• skjule artikler. Hvert filter skal separeres med et semikolon (<code>;</code>).<br /><br />

            <b>Kategorifilter:</b><br />
            <small><i>Hvis noen av disse kategoriene er satt, skjul artikkelen</i></small>
            <textarea autocomplete="off" id="bannedCategoriesTextArea" placeholder="Kategorier;Separeres med semikolon;Donald Trump;USA;Elon Musk"></textarea><br /><br />
            
            <b>N√∏kkelordsfilter:</b><br />
            <small><i>Hvis noen av disse n√∏kkelordene finnes i tittelen, skjul artikkelen</i></small>
            <textarea autocomplete="off" id="bannedKeywordsTextArea" placeholder="Donald Trump;TikTok;Trond Giske"></textarea><br /><br />
            
            <b>URL-filter:</b><br />
            <small><i>Hvis noen av disse filtrene finnes i URLen, skjul artikkelen</i></small>
            <textarea autocomplete="off" id="bannedURLContentTextArea" placeholder="/sport/;/trondelag/;/xl/"></textarea><br /><br />

            <input type="checkbox" id="hidePublicationTimestampCheckBox" /><label for="hidePublicationTimestampCheckBox">Skjul publiseringstidspunkt</label><br />
            
            <input type="checkbox" id="hideCategoriesCheckBox" /><label for="hideCategoriesCheckBox">Skjul kategorier</label><br />
            
            <input type="checkbox" id="hideQuoteTitlesCheckBox" /><label for="hideQuoteTitlesCheckBox">Skjul artikler som kun er et sitat (¬´¬ª, ofte klikkagn)</label><br />
            
            <input type="checkbox" id="hideShortTitlesCheckBox" /><label for="hideShortTitlesCheckBox">Skjul artikler med tre eller f√¶rre ord (ofte klikkagn)</label><br />

            <input type="checkbox" id="showParsedURLCheckBox" /><label for="showParsedURLCheckBox">Vis titteltekst fra lenke (ofte mer kontekst enn tittel)</label><br />
            
            <input type="checkbox" id="showDescriptionCheckBox" /><label for="showDescriptionCheckBox">Vis artikkelbeskrivelse (kan v√¶re meget lang)</label><br />
            
            <input type="checkbox" id="borderArticlesCheckBox" /><label for="borderArticlesCheckBox">Tegn en bord rundt hver artikkel (gir bedre fordeling ved mye informasjon)</label><br />

            <input type="checkbox" id="fillHeightCheckBox" /><label for="fillHeightCheckBox">La hele artikkelh√∏yden fungere som en skjul-knapp</label><br />

            <input type="checkbox" id="phoneModeCheckBox" /><label for="phoneModeCheckBox">Vis skjul-knappen p√• h√∏yre side (telefonmodus for h√∏yrehendte)</label><br /><br />

            <div class="formControlsWrapper">
                <input type="button" value="Lagre innstillinger" id="editModalSaveButton" onclick="saveSettings(); location.reload();" /> 
                <input type="button" value="Tilbakestill innstillinger" id="editModalResetSettingsButton" onclick="clearSettings();" /> 
                <input type="button" value="Tilbakestill skjulte artikler" id="editModalResetHiddenButton" onclick="clearHiddenArticles();" /> 
                <input type="button" value="Avbryt" id="editModalCancelButton" onclick="document.getElementById('modalbg').style.display = 'none';" />
            </div>

            <div class="formControlsWrapper" style="margin-top: 1em;">
                <input type="button" value="Eksporter data" onclick="exportData();"> 
                <input type="button" value="Importer data" onclick="document.getElementById('importElem').click();"> 
                <input type="button" value="Slett alle data" onclick="wipeData();"> 
                <input type="file" id="importElem" accept=".json,text/plain" style="display: none;" onchange="importData(event);">
            </div>
        </div>
    </div>

    <div id="wrapper">
        <div id="mainContent">
            <div id="loadingDiv">‚è≤ Henter artikler...</div>
        </div>
    </div>

    <div class="controls">
        <span class="controlBtn" onclick="document.body.scrollIntoView({behavior: 'smooth'});" title="Skroll til toppen">üîù</span>
    </div>

    <div id="footer">
        Overskrifter fra <a href="https://www.nrk.no/" target="_blank">NRK Nyheter</a>.<br />
        App: &copy; 2025 xdpirate <a href="https://github.com/xdpirate/LiteNRK" target="_blank">[Github]</a>
    </div>

    <script>
        document.querySelector("#bannedCategoriesTextArea").value = bannedCategories.join(";");
        document.querySelector("#bannedKeywordsTextArea").value = bannedKeywords.join(";");
        document.querySelector("#bannedURLContentTextArea").value = bannedURLContent.join(";");
        document.querySelector("#hideQuoteTitlesCheckBox").checked = hideQuoteTitles;
        document.querySelector("#hidePublicationTimestampCheckBox").checked = hidePublicationTimestamp;
        document.querySelector("#hideCategoriesCheckBox").checked = hideCategories;
        document.querySelector("#hideShortTitlesCheckBox").checked = hideShortTitles;
        document.querySelector("#showParsedURLCheckBox").checked = showParsedURL;
        document.querySelector("#showDescriptionCheckBox").checked = showDescription;
        document.querySelector("#borderArticlesCheckBox").checked = borderArticles;
        document.querySelector("#fillHeightCheckBox").checked = fillHeight;
        document.querySelector("#phoneModeCheckBox").checked = phoneMode;
    </script> 
</body>

</html>
